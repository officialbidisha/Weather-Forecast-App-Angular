{"ast":null,"code":"import { fromUnixTime } from 'date-fns';\nimport { faLightbulb as faSolidLightbulb, faDollarSign } from \"@fortawesome/free-solid-svg-icons\";\nimport { faLightbulb as faRegularLightbulb } from \"@fortawesome/free-regular-svg-icons\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../apixu.service\";\nimport * as i3 from \"src/app/theme/theme.service\";\n\nfunction WeatherComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 16)(2, \"center\")(3, \"h3\", 17);\n    i0.ɵɵtext(4, \"Weather Details \");\n    i0.ɵɵelement(5, \"img\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"table\", 19)(7, \"tbody\")(8, \"tr\")(9, \"td\")(10, \"h4\", 17);\n    i0.ɵɵtext(11, \"Longitude\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"h4\", 17);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tr\")(16, \"td\")(17, \"h4\", 17);\n    i0.ɵɵtext(18, \"Latitude\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"td\")(20, \"h4\", 17);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"tr\")(23, \"td\")(24, \"h4\", 17);\n    i0.ɵɵtext(25, \"Weather Details\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"td\")(27, \"h4\", 17);\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(29, \"tr\")(30, \"td\")(31, \"h4\", 17);\n    i0.ɵɵtext(32, \"Temperature\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"td\")(34, \"h4\", 17);\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(36, \"tr\")(37, \"td\")(38, \"h4\", 17);\n    i0.ɵɵtext(39, \"Pressure\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(40, \"td\")(41, \"h4\", 17);\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(43, \"tr\")(44, \"td\")(45, \"h4\", 17);\n    i0.ɵɵtext(46, \"Humidity\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(47, \"td\")(48, \"h4\", 17);\n    i0.ɵɵtext(49);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"src\", ctx_r0.icon, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r0.weatherData.coord.lon);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.weatherData.coord.lat);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.weatherData.weather[0].description, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.weatherData.main.temp, \" K\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.weatherData.main.pressure);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.weatherData.main.humidity);\n  }\n}\n\nfunction WeatherComponent_div_20_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"div\", 24);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const model_r4 = ctx.model;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", model_r4.series, \" \\u2022 \", i0.ɵɵpipeBind2(2, 3, model_r4.name, \"E h:mm a\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 6, model_r4.value, \"1.1-2\"));\n  }\n}\n\nfunction WeatherComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 16)(2, \"h3\", 17)(3, \"center\");\n    i0.ɵɵtext(4, \"Five Day's Forecast\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ngx-charts-line-chart\", 21);\n    i0.ɵɵlistener(\"select\", function WeatherComponent_div_20_Template_ngx_charts_line_chart_select_5_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onSelect($event);\n    })(\"activate\", function WeatherComponent_div_20_Template_ngx_charts_line_chart_activate_5_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onActivate($event);\n    })(\"deactivate\", function WeatherComponent_div_20_Template_ngx_charts_line_chart_deactivate_5_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.onDeactivate($event);\n    });\n    i0.ɵɵtemplate(6, WeatherComponent_div_20_ng_template_6_Template, 7, 9, \"ng-template\", null, 22, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"view\", ctx_r1.view)(\"scheme\", ctx_r1.colorScheme)(\"legend\", ctx_r1.legend)(\"showXAxisLabel\", ctx_r1.showXAxisLabel)(\"showYAxisLabel\", ctx_r1.showYAxisLabel)(\"xAxis\", ctx_r1.xAxis)(\"yAxis\", ctx_r1.yAxis)(\"xAxisLabel\", ctx_r1.xAxisLabel)(\"yAxisLabel\", ctx_r1.yAxisLabel)(\"timeline\", ctx_r1.timeline)(\"results\", ctx_r1.multi)(\"showGridLines\", true)(\"scheme\", ctx_r1.colorScheme)(\"gradient\", ctx_r1.gradient);\n  }\n}\n\nexport let WeatherComponent = /*#__PURE__*/(() => {\n  class WeatherComponent {\n    constructor(formBuilder, apixuService, themeService) {\n      this.formBuilder = formBuilder;\n      this.apixuService = apixuService;\n      this.themeService = themeService;\n      this.icon = \"\";\n      this.faDollarSign = faDollarSign;\n      this.timezoneOffset = new Date().getTimezoneOffset() * 60;\n      this.view = [800, 400]; // options\n\n      this.legend = true;\n      this.showLabels = true;\n      this.animations = true;\n      this.xAxis = true;\n      this.yAxis = true;\n      this.showYAxisLabel = true;\n      this.showXAxisLabel = true;\n      this.xAxisLabel = 'Date';\n      this.yAxisLabel = 'Temperature';\n      this.timeline = true;\n      this.colorScheme = {\n        //domain:['--color-scheme']\n        domain: ['#1d67f7', '#E44D25', '#CFC0BB', '#7aa3e5', '#a8385d', '#aae3f5']\n      };\n    }\n\n    ngOnInit() {\n      this.setLightbulb();\n      this.weatherSearchForm = this.formBuilder.group({\n        location: [\"\"]\n      });\n    }\n\n    setLightbulb() {\n      if (this.themeService.isDarkTheme()) {\n        this.faLightbulb = faRegularLightbulb;\n      } else {\n        this.faLightbulb = faSolidLightbulb;\n      }\n    }\n\n    toggleTheme() {\n      if (this.themeService.isDarkTheme()) {\n        this.themeService.setLightTheme();\n      } else {\n        this.themeService.setDarkTheme();\n      }\n\n      this.setLightbulb();\n    }\n\n    processData(data) {\n      console.log(data);\n      this.multi = [{\n        \"name\": \"Temperature\",\n        \"series\": data.list.map(obj => {\n          return {\n            \"name\": fromUnixTime(obj.dt + data.city.timezone - this.timezoneOffset),\n            \"value\": obj.main.temp - 273.15\n          };\n        })\n      }];\n    }\n\n    sendToAPIXU(formValues) {\n      this.apixuService.getWeather(formValues.location).subscribe(response => {\n        this.weatherData = response;\n        console.log(this.weatherData);\n        this.icon = \"http://openweathermap.org/img/wn/\" + this.weatherData.weather[0].icon + \".png\";\n      }); //runs parallely with console.log\n    }\n\n    sendToForecast(formValues) {\n      this.apixuService.getForecast(formValues.location).subscribe(data => {\n        this.processData(data);\n      });\n    }\n\n    onSelect(data) {\n      console.log('Item clicked', JSON.parse(JSON.stringify(data)));\n    }\n\n    onActivate(data) {\n      console.log('Activate', JSON.parse(JSON.stringify(data)));\n    }\n\n    onDeactivate(data) {\n      console.log('Deactivate', JSON.parse(JSON.stringify(data)));\n    }\n\n  }\n\n  WeatherComponent.ɵfac = function WeatherComponent_Factory(t) {\n    return new (t || WeatherComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApixuService), i0.ɵɵdirectiveInject(i3.ThemeService));\n  };\n\n  WeatherComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WeatherComponent,\n    selectors: [[\"app-weather\"]],\n    decls: 21,\n    vars: 4,\n    consts: [[\"id\", \"container\", 1, \"p-4\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"fa-2x\", 3, \"icon\", \"click\"], [1, \"mr-3\"], [1, \"normal\", 2, \"display\", \"inline-block !important\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"row\"], [1, \"md-form\", \"active-pink\", \"active-pink-2\", \"mb-2\"], [\"type\", \"search\", \"id\", \"search1\", \"aria-label\", \"Search\", \"formControlName\", \"location\", \"mdbInput\", \"\", 1, \"form-control\"], [2, \"display\", \"inline-block !important\"], [\"type\", \"submit\", 1, \"btn\", \"btn-secondary\", \"btn-md\"], [1, \"p-2\"], [1, \"row\", \"mx-md-n5\"], [1, \"col\", \"px-md-5\"], [4, \"ngIf\"], [\"class\", \"col px-md-5 charts\", 4, \"ngIf\"], [1, \"p-3\", \"border\", \"bg-light\"], [1, \"normal\"], [3, \"src\"], [1, \"table\", \"table-striped\", \"h-auto\"], [1, \"col\", \"px-md-5\", \"charts\"], [3, \"view\", \"scheme\", \"legend\", \"showXAxisLabel\", \"showYAxisLabel\", \"xAxis\", \"yAxis\", \"xAxisLabel\", \"yAxisLabel\", \"timeline\", \"results\", \"showGridLines\", \"gradient\", \"select\", \"activate\", \"deactivate\"], [\"tooltipTemplate\", \"\"], [1, \"tooltip-label\"], [1, \"tooltip-val\"]],\n    template: function WeatherComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"span\")(3, \"fa-icon\", 2);\n        i0.ɵɵlistener(\"click\", function WeatherComponent_Template_fa_icon_click_3_listener() {\n          return ctx.toggleTheme();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"h2\", 4);\n        i0.ɵɵtext(6, \"Weather Application\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 1)(8, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function WeatherComponent_Template_form_ngSubmit_8_listener() {\n          ctx.sendToAPIXU(ctx.weatherSearchForm.value);\n          return ctx.sendToForecast(ctx.weatherSearchForm.value);\n        });\n        i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7);\n        i0.ɵɵelement(11, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"div\", 3);\n        i0.ɵɵelementStart(13, \"div\", 9)(14, \"button\", 10);\n        i0.ɵɵtext(15, \"Search\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelement(16, \"div\", 11);\n        i0.ɵɵelementStart(17, \"div\", 12)(18, \"div\", 13);\n        i0.ɵɵtemplate(19, WeatherComponent_div_19_Template, 50, 7, \"div\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, WeatherComponent_div_20_Template, 8, 14, \"div\", 15);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"icon\", ctx.faLightbulb);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.weatherSearchForm);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", ctx.weatherData);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.multi);\n      }\n    },\n    styles: [\".ngx-charts{fill:var(--chartfiller);float:none!important}\"]\n  });\n  return WeatherComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}